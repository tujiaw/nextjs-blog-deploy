---
title: 'mmbiz.qpic.cn图片防盗链'
date: '2017-01-07'
tags: ['Web']
draft: false
summary: 文章介绍了 mmbiz.qpic.cn 图片防盗链，包括防盗链系统含义（防范盗链，防止他人绕过展示页盗用资源）、实现原理（基于 HTTP 协议的 referer 字段跟踪来源进行处理），以及针对该网站的解决方法（在地址前加特定字符串或在 html head 中加入特定 meta 标签）。 
---

在确保地址正确的情况下，不能下载相应的资源，均是受到防盗链系统的影响，那么究竟什么是防盗链系统呢？防盗链自然就是防范盗链，所以这里先说一下什么是盗链。   ...
---
> 先来了解一下什么是防盗链系统吧，只想知道解决方法的可以跳过直接看底部。    

### 什么是防盗链系统
---
* 在确保地址正确的情况下，不能下载相应的资源，均是受到防盗链系统的影响，那么究竟什么是防盗链系统呢？防盗链自然就是防范盗链，所以这里先说一下什么是盗链。
* 盗链是指在自己的页面上展示一些并不在自己服务器上的内容。通常的做法是通过技术手段获得它人服务器上的资源地址，绕过别人的资源展示页面，直接在自己的页面上向最终用户提供此内容。比较常见的是一些小站盗用大站的资源（图片、音乐、视频、软件等），对于这些小站来说，通过盗链的方法可以减轻自己服务器的负担，因为真实的空间和流量均是来自别人的服务器。
* 防盗链系统就是防范盗链的系统，防止别人通过一些技术手段绕过本站的资源展示页面，盗用本站的资源，让绕开本站资源展示页面的资源链接失效。实施防盗链系统后，因为屏蔽了那些盗链的间接资源请求，从而可以大大减轻服务器及带宽的压力，也正如此，越来越多的站点都开始实施防盗链技术。


### 防盗链实现原理
---
* 现在大家应该知道了为什么有真实地址仍然不能下载，这就是防盗链的作用。凡事必有因果，为什么可以防盗链呢，其实现原理是什么？防盗链又是如何实现的呢？
* 提到防盗链的实现原理就不得不从HTTP协议说起，在HTTP协议中，有一个表头字段叫referer，采用URL的格式来表示从哪儿链接到当前的网页或文件。换句话说，通过referer，网站可以检测目标网页访问的来源网页，如果是资源文件，则可以跟踪到显示它的网页地址。有了referer跟踪来源就好办了，这时就可以通过技术手段来进行处理，一旦检测到来源不是本站即进行阻止或者返回指定的页面。
如果想对自己的网站进行防盗链保护，则需要针对不同的情况进行区别对待。如果网站服务器用的是apache，那么使用apache自带的Url Rewrite功能可以很轻松地防止各种盗链，其原理是检查refer，如果refer的信息来自其他网站则重定向到指定图片或网页上。

### 针对mmbiz.qpic.cn的解决方法
---
如地址：http://mmbiz.qpic.cn/mmbiz_jpg/...../0?wx_fmt=jpeg  
大多数时候是可以打开的，如果打开的时候是一张防盗链的图片，可以尝试一下：   
1. 在地址前面加上http://read.html5.qq.com/image?src=forum&q=5&r=0&imgflag=7&imageUrl=  
2. 如果还是不行的话在在html head中加入
``` <meta name="referrer" content="never"> ```